!function(e){"use strict";var t=38,s=40,a=13,i=108,g=27;e.fn.suggestable=function(n){var u=e.extend({"data-url":"suggestable-url","container-class":"suggestable-container","item-class":"suggestable-item","item-active-class":"suggestable-item-active","term-class":"suggestable-term","suggest-class":"suggestable-suggest","delimiter-text":" â€” ","delimiter-class":"suggestable-delimiter","text-class":"suggestable-text","term-min-length":3},n),r="."+u["item-class"],l=-1,d={},c=function(t){var s=t.attr("id")||"sb"+Math.round(9999*Math.random())+1,a=s+"__container",i="#"+a,g=e(i);return g.size()<1?e("<ul/>",{"class":u["container-class"],id:a}).css({"margin-top":t.outerHeight(!0)+"px",display:"none"}).insertAfter(t):g.first()};e(document).on("mouseover",r,function(){l=e(this).data("suggest-index"),e(document).trigger("suggestable-item-select",[e(this)])}).on("mouseout",r,function(){l=-1,e(document).trigger("suggestable-item-unselect",[e(this)])}).on("mouseup",function(t){var s=e("."+u["container-class"]);s.is(t.target)||0!==s.has(t.target).size()||e(document).trigger("suggestable-hide",[s])}).on("suggestable-hide",function(e,t){t.hide()}).on("suggestable-show",function(e,t){l=-1,t.show()}).on("suggestable-item-select",function(e,t){t.closest("."+u["container-class"]).children().removeClass(u["item-active-class"]),t.addClass(u["item-active-class"])}).on("suggestable-item-unselect",function(e,t){t.removeClass(u["item-active-class"])}),e(this).attr("autocomplete","off").on("keydown",function(g){var n,u=g.keyCode||g.which,d=e(this),o=c(d);if(o.is(":visible")){switch(u){case a||i:o.find("[data-suggest-index="+l+"]").trigger("click");break;case t:l=-1===l||l<=e(r,o).first().data("suggest-index")?e(r,o).last().data("suggest-index"):o.find("[data-suggest-index="+(l-1)+"]").data("suggest-index"),n=o.find("[data-suggest-index="+l+"]"),n.trigger("mouseover"),d.val(n.data("suggest-data"));break;case s:l=-1===l||l>=e(r,o).last().data("suggest-index")?e(r,o).first().data("suggest-index"):o.find("[data-suggest-index="+(l+1)+"]").data("suggest-index"),n=o.find("[data-suggest-index="+l+"]"),n.trigger("mouseover"),d.val(n.data("suggest-data"))}if(-1!==[s,t,a,i].indexOf(u)&&-1!==l)return!1}return e(document).on("click",r,function(){d.val(e(this).data("suggest-data")),e(document).trigger("suggestable-hide",[o]).trigger("suggestable-click",[e(this)])}),!0}).on("keyup",function(n){var r=e(this),l=n.keyCode||n.which,o=c(r),m=r.data(u["data-url"]),h=r.val(),f=function(t){var s=0,a=e("<li/>",{"class":u["item-class"]}).hide();if(t.length>0){for(o.empty(),s=0;s<t.length;s++)a.empty(),a.append(e("<span/>",{"class":u["term-class"]}).text(h)).append(e("<span/>",{"class":u["suggest-class"]}).text(t[s].query.substr(h.length))).attr("data-suggest-data",t[s].query).attr("data-suggest-index",s).attr("data-suggest-url",t[s]["suggest-url"]),""!==t[s]["suggest-text"]&&a.append(e("<span/>",{"class":u["delimiter-class"]}).text(u["delimiter-text"])).append(e("<span/>",{"class":u["text-class"]}).text(t[s]["suggest-text"])),o.append(a.show().clone());e(document).trigger("suggestable-show",[o])}};return-1===[s,t,a,i,g].indexOf(l)&&(h.length>=u["term-min-length"]?d.hasOwnProperty(m+":"+h)?f(d[m+":"+h]):e.get(m,{term:h},function(e){d[m+":"+h]=e,f(d[m+":"+h])},"json"):e(document).trigger("suggestable-hide",[o])),o.is(":visible")&&l===g?(e(document).trigger("suggestable-hide",[c(r)]),!1):!0})}}(jQuery);
