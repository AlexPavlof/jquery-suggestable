!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();var i=38,a=40,r=13,o=108,l=27,u=t.outerHeight=function(e){var t=getComputedStyle(e),n=parseInt(t.height,10)||0;return n+=(parseInt(t.paddingTop,10)||0)+(parseInt(t.paddingBottom,10)||0),n+=(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0),n+=(parseInt(t.borderTopWidth,10)||0)+(parseInt(t.borderBottomWidth,10)||0)},c=t.isVisible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={"data-url":"suggestableUrl","container-class":"suggestable-container","item-class":"suggestable-item","item-active-class":"suggestable-item-active","term-class":"suggestable-term","suggest-class":"suggestable-suggest","delimiter-text":" â€” ","delimiter-class":"suggestable-delimiter","text-class":"suggestable-text","term-min-length":3},this.hoverIndex=-1,this.cache={},this.itemSelector="",this.term="",Object.assign(this.options,n),this.inputElement=t,this.containerElement=this.getContainer(this.inputElement),this.itemSelector="."+this.options["item-class"],this.url=this.inputElement.dataset[this.options["data-url"]],this.init()}return s(e,[{key:"init",value:function(){document.addEventListener("mouseup",this.handlerMouseUp.bind(this),!1),document.addEventListener("suggestable-hide",this.handlerSuggestableHide.bind(this),!1),document.addEventListener("suggestable-show",this.handlerSuggestableShow.bind(this),!1),document.addEventListener("suggestable-item-select",this.handlerSuggestableItemSelect.bind(this),!1),document.addEventListener("suggestable-item-unselect",this.handlerSuggestableItemUnselect.bind(this),!1),this.inputElement.setAttribute("autocomplete","off"),this.inputElement.addEventListener("keydown",this.handlerKeyDown.bind(this),!1),this.inputElement.addEventListener("keyup",this.handlerKeyUp.bind(this),!1)}},{key:"getContainer",value:function(e){var t=(e.id||"sb"+Math.round(9999*Math.random())+1)+"__container",n="#"+t,s=document.querySelector(n);return s||((s=document.createElement("ul")).classList.add(this.options["container-class"]),s.id=t,s.style.marginTop=u(e)+"px",s.style.display="none",e.parentNode&&e.parentNode.insertBefore(s,e.nextSibling)),s}},{key:"getItems",value:function(){return this.containerElement.querySelectorAll(this.itemSelector)}},{key:"getCachedValue",value:function(e){return Object.prototype.hasOwnProperty.call(this.cache,e)?this.cache[e]:null}},{key:"fetchResults",value:function(){return fetch(this.url+"?term="+encodeURIComponent(this.term),{method:"GET"}).then(function(e){return e.status<200||e.status>=300?Promise.reject(new Error(e.statusText)):Promise.resolve(e)}).then(function(e){return e.json()})}},{key:"processResults",value:function(e){0!==e.length&&(this.cleanResults(),e.forEach(this.createSuggestableItem.bind(this)),document.dispatchEvent(new CustomEvent("suggestable-show")))}},{key:"createSuggestableItem",value:function(e,t){var n=document.createElement("li"),s=document.createElement("span"),i=document.createElement("span");if(n.style.display="none",n.classList.add(this.options["item-class"]),s.classList.add(this.options["term-class"]),s.textContent=this.term,i.classList.add(this.options["suggest-class"]),i.textContent=e.query.substr(this.term.length),n.appendChild(s),n.appendChild(i),n.dataset.suggestData=e.query,n.dataset.suggestIndex=t.toString(),n.dataset.suggestUrl=e["suggest-url"],""!==e["suggest-text"]){var a=document.createElement("span"),r=document.createElement("span");a.classList.add(this.options["delimiter-class"]),r.classList.add(this.options["text-class"]),a.textContent=this.options["delimiter-text"],r.textContent=e["suggest-text"],n.appendChild(a),n.appendChild(r)}n.style.display="block",n.addEventListener("mouseover",this.handlerMouseOver.bind(this),!1),n.addEventListener("mouseout",this.handlerMouseOut.bind(this),!1),n.addEventListener("click",this.handlerClick.bind(this),!1),this.containerElement.appendChild(n)}},{key:"cleanResults",value:function(){Array.prototype.forEach.call(this.getItems(),function(e){e.remove()})}},{key:"handlerMouseOver",value:function(e){var t=e.currentTarget;t instanceof HTMLElement&&(this.hoverIndex=parseInt(t.dataset.suggestIndex,10),document.dispatchEvent(new CustomEvent("suggestable-item-select",{detail:{element:t}})))}},{key:"handlerMouseOut",value:function(e){var t=e.currentTarget;t instanceof HTMLElement&&(this.hoverIndex=-1,document.dispatchEvent(new CustomEvent("suggestable-item-unselect",{detail:{element:t}})))}},{key:"handlerMouseUp",value:function(e){var t=e.target;t instanceof HTMLElement&&(this.containerElement.contains(t)||document.dispatchEvent(new CustomEvent("suggestable-hide")))}},{key:"handlerClick",value:function(e){var t=e.currentTarget;t instanceof HTMLElement&&(this.inputElement.value=t.dataset.suggestData,document.dispatchEvent(new CustomEvent("suggestable-hide")),document.dispatchEvent(new CustomEvent("suggestable-click",{detail:{item:t}})))}},{key:"handlerSuggestableHide",value:function(){this.containerElement.style.display="none"}},{key:"handlerSuggestableShow",value:function(){this.hoverIndex=-1,this.containerElement.style.display="block"}},{key:"handlerSuggestableItemSelect",value:function(e){var t=this,n=e.detail;if(n){var s=n.element;s instanceof HTMLElement&&(Array.prototype.forEach.call(this.getItems(),function(e){e.classList.remove(t.options["item-active-class"])}),s.classList.add(this.options["item-active-class"]))}}},{key:"handlerSuggestableItemUnselect",value:function(e){var t=e.detail;if(t){var n=t.element;n instanceof HTMLElement&&n.classList.remove(this.options["item-active-class"])}}},{key:"handlerKeyDown",value:function(e){var t=e.keyCode||e.which;if([a,i].includes(t)&&e.preventDefault(),c(this.containerElement))switch(t){case r||o:this.pressEnterKey(e);break;case i:this.pressArrowUpKey();break;case a:this.pressArrowDownKey()}}},{key:"pressEnterKey",value:function(e){var t=this.getItems();if(t.length){var n=t[this.hoverIndex];n&&(e.preventDefault(),n.dispatchEvent(new Event("click")))}}},{key:"pressArrowUpKey",value:function(){var e=this.getItems();if(e.length){-1===this.hoverIndex||this.hoverIndex<=0?this.hoverIndex=e.length-1:this.hoverIndex-=1;var t=e[this.hoverIndex];t&&(t.dispatchEvent(new Event("mouseover")),this.inputElement.value=t.dataset.suggestData)}}},{key:"pressArrowDownKey",value:function(){var e=this.getItems();if(e.length){-1===this.hoverIndex||this.hoverIndex>=e.length-1?this.hoverIndex=0:this.hoverIndex+=1;var t=e[this.hoverIndex];t&&(t.dispatchEvent(new Event("mouseover")),this.inputElement.value=t.dataset.suggestData)}}},{key:"handlerKeyUp",value:function(e){var t=this;this.term=this.inputElement.value.trim();var n=e.keyCode||e.which,s=this.url+":"+this.term;if(-1===[a,i,r,o,l].indexOf(n))if(this.term.length>=this.options["term-min-length"]){var u=this.getCachedValue(s);u?this.processResults(u):this.fetchResults().then(function(e){t.cache[s]=e,t.processResults(e)})}else document.dispatchEvent(new CustomEvent("suggestable-hide"));c(this.containerElement)&&n===l&&document.dispatchEvent(new CustomEvent("suggestable-hide"))}}]),e}();t.default=h},function(e,t,n){"use strict";var s,i=n(0),a=(s=i)&&s.__esModule?s:{default:s};$.fn.suggestable=function(e){new a.default(this,e)}}]);